(function(f,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],o):(f=typeof globalThis<"u"?globalThis:f||self,o(f["react-party"]={},f.React))})(this,function(f,o){"use strict";const G=(t=>t&&typeof t=="object"&&"default"in t?t:{default:t})(o),J=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#607d8b"],q=Math.PI*2,K=(t,a)=>{if(a<0||a>1)throw new Error("x value must be 0-1");const i=Object.values(t).reduce((e,u)=>e+u,0);let r=a;for(let[e,u]of Object.entries(t)){if(r<u/i)return e;r-=u/i}},Q=t=>{const a=o.useRef(),i=o.useCallback(()=>{t(),a.current=requestAnimationFrame(i)},[t]);o.useEffect(()=>(a.current=requestAnimationFrame(i),()=>cancelAnimationFrame(a.current)),[i])},H=({ctx:t,x:a,y:i,p:r,scale:e})=>{const u=a+r.tilt;t.beginPath(),t.lineCap="butt",t.lineWidth=r.diameter*e,t.strokeStyle=r.color,t.moveTo((u+r.diameter/2)*e,i*e),t.lineTo(u*e,(i+r.tilt+r.diameter/2)*e),t.stroke()},U=({ctx:t,x:a,y:i,p:r,scale:e})=>{t.fillStyle=r.color,t.beginPath(),t.ellipse(a*e,i*e,r.diameter/1.5*e*(1+r.tilt/100),r.diameter/1.5*e,0,0,q),t.fill()},M=({numPoints:t=3,spiked:a=!1,spikedPortion:i=.5,fill:r=!0}={})=>({ctx:e,x:u,y:F,p:s,scale:h})=>{const T=q/t,[A,S]=[u*h,F*h];e.beginPath(),e.fillStyle=s.color,e.strokeStyle=s.color;for(let g=0;g<t+1;g++){const _=s.tilt/50+g%t*T,E=A+Math.cos(_)*h*s.diameter*(1+s.tilt/100),O=S+Math.sin(_)*h*s.diameter*(1+Math.sin(s.tilt/50));if(a){const N=s.tilt/50+(g%t-.5)*T,D=A+i*Math.cos(N)*h*s.diameter*(1+s.tilt/100),m=S+i*Math.sin(N)*h*s.diameter*(1+Math.sin(s.tilt/50));e.lineTo(D,m)}g===0?e.moveTo(E,O):e.lineTo(E,O)}r?e.fill():e.stroke()},B={line:H,circle:U,triangle:M({numPoints:3}),pentagon:M({numPoints:5}),hexagon:M({numPoints:6}),heptagon:M({numPoints:7}),octagon:M({numPoints:8}),star:M({numPoints:5,spiked:!0})},X=({gravity:t=1.3,simulationSpeed:a=1.5,tiltAmount:i=15,xVelocityBase:r=0,xVelocityVariance:e=1.5,yVelocityBase:u=-1,yVelocityVariance:F=3,diameterBase:s=5,diameterVariance:h=10,tiltBase:T=-10,tiltVariance:A=10,tiltAngleBase:S=0,tiltAngleVariance:g=q,tiltAngleIncrementBase:_=.05,tiltAngleIncrementVariance:E=.07,colors:O=J,shapeDrawingFunctions:N=B,shapeWeights:D={triangle:2,circle:1,star:1,line:1}}={})=>{const m=o.useRef([]),Y=o.useCallback(({count:d=75,sourceRef:y}={})=>{var l,P,b,L;const{left:w,top:I,width:c,height:v}=(L=(b=(l=y==null?void 0:y.current)==null?void 0:l.getBoundingClientRect())!=null?b:(P=document.activeElement)==null?void 0:P.getBoundingClientRect())!=null?L:document.body.getBoundingClientRect();m.current=[...m.current,...Array.from({length:d},()=>{const[j,k]=[w+Math.random()*c,I+Math.random()*v],[W,n]=[w+c/2,I+v/2],C=Math.atan2(k-n,j-W),R=Math.cos(C)*Math.random()*e+r,z=Math.sin(C)*Math.random()*F+u;return{x:j,y:k,vx:R,vy:z,diameter:Math.random()*h+s,tilt:Math.random()*A+T,tiltAngleIncrement:Math.random()*E+_,tiltAngle:Math.random()*g+S,color:O[Math.random()*O.length|0],shape:K(D,Math.random())}})]},[r,e,u,F,s,h,T,A,S,g,_,E,D]);return{Confetti:()=>{const d=o.useRef(),y=o.useRef(),w=o.useRef(),I=o.useCallback(()=>{const c=d.current,v=c.getBoundingClientRect(),{width:l,height:P}=v,b=window.devicePixelRatio;y.current=v,c.scale=b,c.width=Math.floor(l*b),c.height=Math.floor(P*b)},[]);return o.useEffect(()=>{if(d.current){const c=new ResizeObserver(I);return c.observe(d.current),()=>c.disconnect()}},[]),o.useEffect(()=>{if(d.current){const c=d.current.getContext("2d");w.current=c}},[]),Q(()=>{if(d.current&&w.current&&y.current){const c=d.current,v=w.current,l=c.scale,{width:P,height:b,left:L,top:j}=y.current,[k,W]=[P*l,b*l];m.current=m.current.map(n=>{const C=a/10,R=t/100;return{...n,tiltAngle:n.tiltAngle+n.tiltAngleIncrement,vy:n.vy+R*l,x:n.x+n.vx*n.diameter*l*C,y:n.y+n.vy*n.diameter*l*C,tilt:Math.sin(n.tiltAngle)*i}}),m.current=m.current.filter(n=>!(n.x<0||n.x>k||n.y>W)),v.clearRect(0,0,k*l,W*l);for(let n of m.current){const[C,R]=[n.x-L,n.y-j],z=N[n.shape];z({p:n,x:C,y:R,ctx:v,scale:l})}}}),G.default.createElement("canvas",{ref:d,style:{display:"block",position:"absolute",pointerEvents:"none",inset:0,width:"100%",height:"100%"}})},showConfetti:Y}};f.SHAPE_DRAWING_FUNCTIONS=B,f.drawCircleParticle=U,f.drawLineParticle=H,f.makeDrawRegularPolygonParticle=M,f.useConfetti=X,Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
